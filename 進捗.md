# 進捗
## 全体計画（設計書.md準拠）
1. WPF(MVVM)プロジェクト作成、基本画面（フォルダ選択/オプション/一覧/ログ）
2. スキャン（Mod列挙、assets有無、lang候補検出、方針/件数概算）
3. 実行計画（Move/Delete/CreateDir）とドライラン（予定操作の一覧表示）
4. 実行処理（確認ダイアログ、削除方式、バックアップZip、キャンセル/進捗、結果サマリ）
5. ログ保存（run-log.txt等）
6. ビルド/動作確認、README更新（必要なら）

## 現在の立ち位置
- フェーズ：v1.0 実装完了（ビルド確認済み）→ v1.1 対応中
- いまやっていること：jarのままlang抽出（jarモード）対応の設計/実装
- 次にやること：jar/展開済みの両対応をUIオプションで切替

## 完了したタスク
- 2025-12-19: 設定（オプション/TargetDir）を settings.json に保存し、起動時に復元するように対応
- 2025-12-19: jarモードの抽出先を _jar_lang から jarと同フォルダ直下（<jar名>/lang）へ変更
- 2025-12-19: lang検出を拡張（assets外のlangも対象）し、複数langを個別抽出できるモードを追加
- 2025-12-18: 設計書.mdを確認し、進捗.mdを新規作成
- 2025-12-18: WPF(MVVM)プロジェクト作成（スキャン/実行/ドライラン/ログ/安全確認/キャンセル/バックアップZip/ゴミ箱削除）を実装
- 2025-12-18: dotnet build (Release) でビルド成功を確認
- 2025-12-18: publish.ps1追加、READMEに配布（self-contained/framework-dependent）手順を追記
- 2025-12-18: 起動失敗（ProgressBarのTwoWayバインド問題）を修正し、起動時例外ログ出力を追加
- 2025-12-18: 実行時エラー（Logs更新のスレッド問題）を修正
- 2025-12-19: 進捗管理/Git運用ルール（開発運用ルール.md）を追加し、v1.1（jarモード）対応に着手
- 2025-12-19: jarモード（.jarのままassets/<modid>/lang抽出）を実装し、dotnet build (Release) でビルド成功を確認
- 2025-12-19: publish.ps1 に both モードを追加し、同梱/非同梱を別フォルダへ出力できるように整理
- 2025-12-19: publish.ps1 に -Zip を追加し、同梱/非同梱の配布用zip（識別しやすいファイル名）を自動生成

## バグ / エラー修正ログ
- 2025-12-18: 起動失敗（ProgressBar TwoWayバインド）
	- 現象：アプリ起動直後に「ProgressValue が読み取り専用のため TwoWay バインド不可」で例外終了
	- 発生条件：ProgressBar.Value を既定の TwoWay バインドで読み取り専用プロパティへバインド
	- 原因：WPF の ProgressBar.Value は既定で TwoWay、VM 側 ProgressValue が private set
	- 対策：ProgressBar/ProgressText を OneWay バインドに変更、起動時例外を crash-log.txt に出力

- 2025-12-18: 実行時エラー（ItemsControl が項目ソースと一致していません）
	- 現象：実行中にログDataGridが例外（ItemsControl/ItemContainerGenerator の不整合）で落ちる
	- 発生条件：実行処理がバックグラウンドで動作中に Logs(ObservableCollection) を更新
	- 原因：UIスレッド以外から ObservableCollection を更新し、DataGrid が CollectionChanged の整合性を保てない
	- 対策：Logger が Dispatcher 経由で UI スレッドへログ追加するように修正

## 未着手 / 保留

## メモ / 課題
- ドライラン時の「予定操作一覧」は、追加画面を増やさずログ領域で表示する方針（設計書の単一ウィンドウ要件優先）。
